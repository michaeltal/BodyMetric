# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

BodyMetric is a single-page web application for tracking body composition metrics (weight, body fat percentage, lean muscle mass). The app uses a dual-storage architecture: data is stored on a Node.js server when available, with localStorage fallback for offline use.

## Development Setup

```bash
# Install dependencies
npm install

# Start the server (recommended for multi-browser access)
node server.js

# Alternative: Static file server for frontend-only development
python3 -m http.server
```

The app runs on `http://localhost:3000` with the Node server, or `http://localhost:8000` with the static server.

## Architecture

- **Single-class design**: `BodyCompositionTracker` class in `app.js` manages all application state and logic
- **Dual storage strategy**: Server-first with localStorage fallback, automatically syncs between storage methods
- **Data persistence**: Server stores data in `data.json`, client uses localStorage when server unavailable
- **Visualization**: Chart.js with date-fns adapter for time-series data visualization

## Key Files

- `app.js` (1,200+ lines): Core application logic, single `BodyCompositionTracker` class
- `server.js`: Minimal Express server with CORS and JSON file persistence
- `style.css`: Comprehensive CSS with design system using CSS variables
- `data.json`: Server-side data storage
- `index.html`: Single-page application entry point

## Code Style

- **Indentation**: 2 spaces for JavaScript, CSS, and HTML
- **Dependencies**: Keep minimal - only Express and body-parser currently used
- **Data validation**: Duplicate prevention, unit conversion, BMI calculation built-in

## Testing and Verification

```bash
# Verify server starts (no real tests implemented)
npm test

# Test server functionality
node server.js
# Stop with Ctrl+C
```

## Data Structure

The application manages measurements with the following structure:
- Date-based entries with weight, body fat percentage, lean muscle mass
- Goals tracking for each metric
- Unit conversion between metric/imperial
- 7-day rolling averages for trend analysis

## Development Notes

- Server automatically handles CORS for localhost development
- App gracefully degrades when server unavailable
- CSV import/export functionality available through UI
- All code was generated by AI tools (noted in README)